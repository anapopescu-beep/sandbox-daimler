/****************************************************************************************************************************************************\
 *** 
 *** Simulink model       : BFE_TestHarness
 *** TargetLink subsystem : BFE_TestHarness/BFE_AC_BeltFunctionExecution
 *** Codefile             : BFE_Config.h
 ***
 *** Generated by TargetLink, the dSPACE production quality code generator
 *** Generation date: 2018-04-17 16:56:17
 ***
 *** CODE GENERATOR OPTIONS:
 *** Code generation mode                     : AUTOSAR
 *** AUTOSAR version                          : 4.2.2
 *** Compiler                                 : <unknown>
 *** Target                                   : Generic
 *** ANSI-C compatible code                   : yes
 *** Code Optimization                        : enabled
 *** Constant style                           : decimal
 *** Clean code option                        : enabled
 *** Logging mode                             : Do not log anything
 *** Code Coverage                            : disabled
 *** Generate empty conditional branches      : disabled
 *** Loop unroll threshold                    : 5
 *** Shift mode                               : automatic
 *** Handle unscaled SF expr. with TL type    : enabled
 *** Assignment of conditions                 : AllBooleanOutputs 
 *** Scope reduction only to function level   : disabled
 *** Exploit ranges if not erasable           : disabled
 *** Exploit Compute Through Overflow         : optimized
 *** Linker sections                          : enabled
 *** Enable Assembler                         : disabled
 *** Variable name length                     : 31 chars
 *** Use global bitfields                     : disabled
 *** Stateflow: use of bitfields              : enabled
 *** State activity encoding limit            : 5
 *** Omit zero inits in restart function      : disabled
 *** Share functions between TL subsystems    : disabled
 *** Generate 64bit functions                 : enabled
 *** Inlining Threshold                       : 6
 *** Line break limit                         : 150
 *** Target optimized boolean data type       : enabled
 *** Keep saturation elements                 : disabled
 *** Extended variable sharing                : disabled
 *** Extended lifetime optimization           : enabled
 *** Style definition file                    : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\Config\codegen\cconfig.xml
 *** Root style sheet                         : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\XML\CodeGen\Stylesheets\TL_CSourceCodeSS.xsl
 ***
 *** TargetLink version      : 4.2 from 14-Oct-2016
 *** Code generator version  : Build Id 4.2.0.26 from 2016-10-17 16:31:48

\****************************************************************************************************************************************************/

#ifndef BFE_CONFIG_H
#define BFE_CONFIG_H


#include "Nvp_Generated.h"
#include "Config.h"
#include "Nvp_Cfg.h"
#include "Compiler_Cfg.h"

/*------------------------------------------------------------------------------------------------------------------*\
  DEFINES (OPT)
\*------------------------------------------------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------------------------*\
  INCLUDES
\*------------------------------------------------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------------------------*\
  DEFINES
\*------------------------------------------------------------------------------------------------------------------*/
/********************************************************************************************************************\
   MACRO_CFG_BFE: Variable class
\********************************************************************************************************************/

/* Pre processor options */

#define BFE_CFG_OPT_ADAPT_CURRENT /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_BELT_BLOCKED_HES /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_BELT_MVT_DETECT /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_MOTOR_BLOCKED /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_TRIGG_OFF /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_HIGH_POWER /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_PID /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */
#define BFE_CFG_OPT_BELT_PAYOUT_ABORTION 1 /* LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 255 */

/********************************************************************************************************************\
   DEFINE_CFG_BFE: Variable class
\********************************************************************************************************************/
#define KU8_NB_MAX_BELT_FCT_LIBRARY             KU8_NB_CYCLES
/* Maximum of belt function used by the final application
 * PRE BUILD
 * */

/* XXX _CSA_ remap on RTE */
#define KU8_NB_CYCLES                           (uint8) 35

#define KU8_NB_MAX_STEP_LIBRARY                 KU8_NB_STEPS
/* Number of steps used by the final application
 * PRE BUILD
 * */

/* XXX _SFL_ Remap on RTE */
#define KU8_CYCLE_SIZE                          KU8_NVP_CYCLE_SIZE
#define KU8_INDEX_OF_FIRST_STEP                 (uint8) 4
#define KU8_MAX_STEP_INDEX                      (uint8) 8

#define KU8_STEP_SIZE                           KU8_NVP_BLOCK_STEP_SIZE

#define CAL_KU8_MAX_MOTOR_CURRENT               (uint8) 40
/* Maximum value for motor current allowed
 * 1 lsb = 1 Amp
 * */

/* Coefficient used for the standard current regulation */
#define CAL_KU16_HIGH_THRS                      (2500)
#define CAL_KU16_LOW_THRS                       (500)
#define CAL_KU16_LOW_OFFSET                     (64)
#define CAL_KU16_HIGH_OFFSET                    (320)

/* Coefficient used for the PID regulation */
#define CAL_KU8_PID_BATTERY_KP                  CALIB_BLOCK_ID_PID_PARAM_RomBlockData.NVP_u8PIDsupplyP
#define CAL_KU8_PID_MOTOR_KP                    CALIB_BLOCK_ID_PID_PARAM_RomBlockData.NVP_u8PIDmotorP

#define CAL_KU8_PID_BATTERY_KI                  CALIB_BLOCK_ID_PID_PARAM_RomBlockData.NVP_u8PIDsupplyI
#define CAL_KU8_PID_MOTOR_KI                    CALIB_BLOCK_ID_PID_PARAM_RomBlockData.NVP_u8PIDmotorI

#define CAL_KU8_PID_BATTERY_KD                  CALIB_BLOCK_ID_PID_PARAM_RomBlockData.NVP_u8PIDsupplyD
#define CAL_KU8_PID_MOTOR_KD                    CALIB_BLOCK_ID_PID_PARAM_RomBlockData.NVP_u8PIDmotorD


#define CAL_KU16_PYRO_SEQ_BRAKING_DURATION      CALIB_BLOCK_ID_ECPL_OTHER_PARAM_RomBlockData.NVP_u16BrakingSequenceDuration
/*
   Description: Resolution : 1 lsb = 400ï¿½s
   LSB: 2^0 OFF:  0 MIN/MAX:  0 .. 65000 */

#define CAL_KS16_GAIN_INTEGER_BOOST             CALIB_BLOCK_ID_BOOST_RomBlockData.NVP_s16GainIntegerBoost
#define CAL_KS16_GAIN_INTEGER_STANDARD          CALIB_BLOCK_ID_BOOST_RomBlockData.NVP_s16GainIntegerStandard

/* Temperature adaptation factors */
/* Release */
#define CAL_AU16_TEMP_WEIGHT_INDEX_RELEASE      CALIB_BLOCK_ID_WEIGHT_REL_TABLE_RomBlockData.NVP_au16WeightTempIdxRel
#define CAL_AU8_TEMP_WEIGHT_FACTORS_RELEASE     CALIB_BLOCK_ID_WEIGHT_REL_TABLE_RomBlockData.NVP_au8WeightFactorsRel

/* Tensioning */
#define CAL_AU16_TEMP_WEIGHT_INDEX_TENS_0       CALIB_BLOCK_ID_WEIGHT_TENS0_TABLE_RomBlockData.NVP_au16WeightTempIdxTens0
#define CAL_AU8_TEMP_WEIGHT_FACTORS_TENS_0      CALIB_BLOCK_ID_WEIGHT_TENS0_TABLE_RomBlockData.NVP_au8WeightFactorsTens0

#define CAL_AU16_TEMP_WEIGHT_INDEX_TENS_1       CALIB_BLOCK_ID_WEIGHT_TENS1_TABLE_RomBlockData.NVP_au16WeightTempIdxTens1
#define CAL_AU8_TEMP_WEIGHT_FACTORS_TENS_1      CALIB_BLOCK_ID_WEIGHT_TENS1_TABLE_RomBlockData.NVP_au8WeightFactorsTens1

#define CAL_AU16_TEMP_WEIGHT_INDEX_TENS_2       CALIB_BLOCK_ID_WEIGHT_TENS2_TABLE_RomBlockData.NVP_au16WeightTempIdxTens2
#define CAL_AU8_TEMP_WEIGHT_FACTORS_TENS_2      CALIB_BLOCK_ID_WEIGHT_TENS2_TABLE_RomBlockData.NVP_au8WeightFactorsTens2

#define CAL_AU16_TEMP_WEIGHT_INDEX_TENS_3       CALIB_BLOCK_ID_WEIGHT_TENS3_TABLE_RomBlockData.NVP_au16WeightTempIdxTens3
#define CAL_AU8_TEMP_WEIGHT_FACTORS_TENS_3      CALIB_BLOCK_ID_WEIGHT_TENS3_TABLE_RomBlockData.NVP_au8WeightFactorsTens3

/* Current interruption point feature with temperature adaptation */
#define CAL_AU16_CURRENT_INT_POINT_TEMPERATURE  CALIB_BLOCK_ID_INT_CURRENT_CORR_RomBlockData.NVP_au16AdaptCurrentLimitTempIdx
#define CAL_AU8_CURRENT_INT_POINT_FACTOR        CALIB_BLOCK_ID_INT_CURRENT_CORR_RomBlockData.NVP_au8AdaptCurrentLimitFactors
#define CAL_KAU16_CURRENT_INT_POINT             CALIB_BLOCK_ID_INT_CURRENT_TABLE_RomBlockData.NVP_au16AdaptCurrentLimitValues

/* Power degradation factor in order to avoid a power over consumption */ 
#define CAL_AU16_POWER_DEG_VBATT                CALIB_BLOCK_ID_POWER_DEGRADATION_RomBlockData.NVP_au16PowerDegradVoltIdx
#define CAL_AU8_POWER_DEG_FACTORS               CALIB_BLOCK_ID_POWER_DEGRADATION_RomBlockData.NVP_au8PowerDegradFactors

/* Belt payout Thresholds for steps with option "abortion by sufficient belt payout" */
#define CAL_KU16_BELT_PAYOUT_ABORTION_THRS1     (uint8) 75
#define CAL_KU16_BELT_PAYOUT_ABORTION_THRS2     (uint8) 75

/* Belt profiles parameters */
#define CAL_AU8_BELT_PROFILES                   NVP_BLOCK_ID_CYCLE_0_RamBlockData.NVP_au8BeltProfilesDefinitions
/* Steps parameterss */
#define CAL_AU8_STEPS_DEFINITION                NVP_BLOCK_ID_STEP_0_RamBlockData.NVP_au8StepsDefinitions
/*------------------------------------------------------------------------------------------------------------------*\
  TYPEDEFS
\*------------------------------------------------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------------------------*\
  ENUMS
\*------------------------------------------------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------------------------*\
  VARIABLES
\*------------------------------------------------------------------------------------------------------------------*/
/********************************************************************************************************************\
   DATA_CFG_BFE: global variables (RAM) | Width: 16
\********************************************************************************************************************/
#define CAL_KAU16_ALPHA_MOTOR_CURRENT           CALIB_BLOCK_ID_ECPL_ALPHA_TABLE_RomBlockData.NVP_au16AlphaMotorCurrent
#define CAL_KAU16_BETA_SUPPLY_CURRENT           CALIB_BLOCK_ID_ECPL_BETA_TABLE_RomBlockData.NVP_au16BetaSupplyCurrent

/********************************************************************************************************************\
   DATA_CFG_BFE: global variables (RAM) | Width: 8
\********************************************************************************************************************/
#define CAL_KAU8_ALPHA_COEF                     CALIB_BLOCK_ID_ECPL_ALPHA_TABLE_RomBlockData.NVP_au8AlphaFactors
#define CAL_KAU8_BETA_COEF                      CALIB_BLOCK_ID_ECPL_BETA_TABLE_RomBlockData.NVP_au8BetaFactors

#define CAL_AU16_VELOCITY_PID_TIME_IDX          NVP_BLOCK_ID_VELOCITY_PID_PARAM_RamBlockData.NVP_au16VelocityPIDTimeIdx
#define CAL_AS16_VELOCITY_PID_KI_FACTORS        NVP_BLOCK_ID_VELOCITY_PID_PARAM_RamBlockData.NVP_as16VelocityKIFactors
#define CAL_AS16_VELOCITY_PID_KP_FACTORS        NVP_BLOCK_ID_VELOCITY_PID_PARAM_RamBlockData.NVP_as16VelocityKPFactors

/*------------------------------------------------------------------------------------------------------------------*\
  PARAMETERIZED MACROS
\*------------------------------------------------------------------------------------------------------------------*/
/*------------------------------------------------------------------------------------------------------------------*\
  FUNCTION PROTOTYPES
\*------------------------------------------------------------------------------------------------------------------*/
/*#define BFE_EnterCriticalSection                SuspendOSInterrupts
#define BFE_ExitCriticalSection                 ResumeOSInterrupts*/
#define BFE_EnterCriticalSection                DisableAllInterrupt
#define BFE_ExitCriticalSection                 EnableAllInterrupt


#endif/*BFE_CONFIG_H */
/*------------------------------------------------------------------------------------------------------------------*\
  END OF FILE
\*------------------------------------------------------------------------------------------------------------------*/

