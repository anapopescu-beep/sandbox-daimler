					Autoliv Electronics Document
--------------------------------------------------------------------------
Nightly test: No
Test type: Requirement-Based test
Regression Test: No
Fault injection method used: No
Resource usage evaluation: No
Priority: No
Safety relevant: No
Requirement under test: ARCH_SW_ATM_0004, ARCH_SW_ATM_0260, ARCH_SW_ATM_0111, ARCH_SW_ATM_0113
ARCH_SW_ATM_0004: If critical Autotests are not passed or finished cyclic tests cannot run.
ARCH_SW_ATM_0260: Verify if an auto-test cannot be executed ATM_runMainFunction shall set the status of the tests to �NOT DECIDED�.
--------------------------------------------------------------------------

Preconditions

	Step 1: Bench Initialization

	Step 2: Set a breakpoint in ATM_runMainFunction() at line 'atm_PlayCyclicTests(castRunningCyclicList);'.

Action: ARCH_SW_ATM_0004, ARCH_SW_ATM_0260

	Step 3: Check if CPU stopped at line 'atm_PlayCyclicTests(castRunningCyclicList);'. 
		Expected result:  CPU is Stopped

	Step 4: Set a breakpoint in function atm_PlayCyclicTests() at line 'if (B_TRUE == atm_isAutoTestEnabled(u8AutotestID))' and press run.

	Step 5: Check if CPU stopped in function atm_PlayCyclicTests() at line 'if (B_TRUE == atm_isAutoTestEnabled(u8AutotestID))'. 
		Expected result:  CPU is Stopped

	Step 6: Step in function atm_executeAutoTest().

	Step 7: Set a breakpoint in function atm_executeAutoTest() at line 'atm_au8AtStatuses[cu8AutotestID] = u8ReturnedAutoTestStatus;' under 'case KU8_ATM_TEST_NOT_DECIDED' and 'case KU8_ATM_TEST_BAD_CONDITIONS'.

Action: ARCH_SW_ATM_0260, ARCH_SW_ATM_0111, ARCH_SW_ATM_0113

	Step 8: Check if CPU stopped in function atm_executeAutoTest() at line 'atm_au8AtStatuses[cu8AutotestID] = u8ReturnedAutoTestStatus;' under 'case KU8_ATM_TEST_NOT_DECIDED' and 'case KU8_ATM_TEST_BAD_CONDITIONS'. 
		Expected result:  CPU is Stopped

	Step 9: Set a breakpoint in function atm_executeAutoTest() at line 'u8ReturnedAutoTestStatus = castATMConfig[cu8AutotestID].pfAutotestCallback();' and press run.

	Step 10: Set variable u8ReturnedAutoTestStatus to KU8_ATM_TEST_OK.

	Step 11: Set a breakpoint in function atm_executeAutoTest() at line 'case KU8_ATM_TEST_OK:'.

Action: ARCH_SW_ATM_0004

	Step 12: Check if CPU stopped in function atm_executeAutoTest() at line 'case KU8_ATM_TEST_OK:'. 
		Expected result:  CPU is Stopped

	Step 13: Set a breakpoint in function atm_executeAutoTest() at line 'u8ReturnedAutoTestStatus = castATMConfig[cu8AutotestID].pfAutotestCallback();' and press run.

	Step 14: Set variable u8ReturnedAutoTestStatus to KU8_ATM_TEST_NOK.

	Step 15: Set a breakpoint in function atm_executeAutoTest() at line 'case KU8_ATM_TEST_NOK:'.

Action: ARCH_SW_ATM_0004

	Step 16: Check if CPU stopped in function atm_executeAutoTest() at line 'case KU8_ATM_TEST_NOK:'. 
		Expected result:  CPU is Stopped

Postcondition

	Step 17: Return ECU to default values
